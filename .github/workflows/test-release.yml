name: Validate Action

on: push

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        scheme:
          - continuous
          - semantic
        type:
          - null
          - prerelease
        suffix:
          - pre
          - alpha
        build:
          - true
          - false
    steps:
      - uses: actions/checkout@v2

      - id: compute_tag
        uses: ./
        with:
          repository: ${{ github.repository }}
          github_token: ${{ github.token }}
          version_scheme: ${{ matrix.scheme }}
          version_type: ${{ matrix.type }}
          prerelease_suffix: ${{ matrix.suffix }}
          include_build_number: ${{ matrix.build }}

      - name: print out computed tag
        run: echo "The next computed tag is $TAG"
        env:
          TAG: ${{ steps.compute_tag.outputs.next_tag }}
